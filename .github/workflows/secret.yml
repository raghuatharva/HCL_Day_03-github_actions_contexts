name: usage of secrets context in workflow
on:
  pull_request:
    branches:
      - main 
jobs:
  terraform-infra:
    runs-on: ubuntu-latest

    steps:
    #running template using marketplace. instead of run , use "uses"
    - name: Checkout
      uses: actions/checkout@v5.0.0

    # - name: configuring AWS credentials
    #   uses: aws-actions/configure-aws-credentials@v4.3.1
    #   with:
    #     aws-region: us-east-1
    #     aws-access-key-id: secret.AWS_ACCESS_KEY_ID
    #     aws-secret-access-key: secret.AWS_SECRET_ACCESS_KEY

    - name: Install Terraform
      uses: hashicorp/setup-terraform@v3
      with:
        terraform_version: 1.7.5

    # - name: Terraform Format
    #   run: terraform fmt -recursive

    # - name: Terraform Init
    #   run: terraform init -backend-config="key=ecs/dev/terraform.tfstate"


    # - name: Select/Create Dev Workspace
    #   run: terraform workspace select dev || terraform workspace new dev



    # - name: Terraform Validate
    #   run: terraform validate

    # - name: Terraform Plan
    #   run: terraform plan -out=tfplan -var-file=dev.tfvars

    # - name: Terraform Apply (only on main)
    #   if: github.event_name == 'push' && github.ref == 'refs/heads/main'
    #   run: terraform apply -auto-approve tfplan
